{% extends 'base.html' %}
{% load readmore el_pagination_tags staticfiles %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/timeline_app.css' %}" />
{% endblock %}

{% block subheader %}
    {% include "subheader.html"%}
{% endblock subheader %}

{% block content %}
<div class="content-center">
    <div class="new-post-form">
            {% if form.instance.pk  %}
                <form action="{% url 'timelineitem_edit_text'  form.instance.pk %}" method="post" id="new-post-form" stye="width: 900px;" enctype="multipart/form-data">
            {% else %}
                <form action="{% url 'text_form'  %}" method="post" id="new-post-form" stye="width: 900px;" enctype="multipart/form-data">
            {% endif %}
            {% csrf_token %}
            <div style="float:left;border-right:1px dashed black;">
                <div>
                    <label><b>Basics:</b></label>Share Dharma teachings, resources and your own expeirences.<br><br>
                    <label>Post is: </label>
                    {% for radio in form.item_category %}
                    {{ radio.tag }} {{ radio.choice_label }}
                    {% endfor %}
                    <br>
                </div>
                <div>
                    <label>Title or Quote: </label>{{ form.title }}{{ form.title.errors }}</textarea>
                </div>
                <div id="div_text_id">
                    <label>Expanded Text: </label>{{ form.content }}{{ form.content.errors }}</textarea>
                </div>
                <div>
                    <label>Is Original:</label>{{ form.is_original }}The main content of this post is my own writing or artistic creation.{{ form.is_original.errors }}
                    </select>
                </div>
                <div id="div_teacher_id">
                    <label>Teacher(Optional):</label>{{ form.teacher_name }}{{ form.teacher_name.errors }}
                </div>
                <div>
                    <label>Language:</label>{{ form.language }}{{ form.language.errors }}
                </div>
            </div>
            <div style="float:left;">
                <label><b>Extended:</b></label>Add additional information to give your content more exposure. All Optional.<br><br>
                <div>
                    <label>Topics:</label>{{ form.topic_list }}, {{ form.topic_list }}, {{ form.topic_list }} {{ form.topic_list.errors }}
                <div>
                    <label>Upload a Picture/HTML/PDF: </label>
                    {% if form.instance.pk and form.instance.uploaded_file  %}
                    <a href="{{ form.instance.uploaded_file.url }}">{{ form.instance.file_name }}</a>
                    {% endif %}
                    {{ form.uploaded_file }}{{ form.uploaded_file.errors }}
                </div>
            </div>
            <div style="clear:both;text-align:right;">
                <button class="button" style="float:none;" type="submit">Submit</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}
{% block extra_js %}
{% include "timeline/timeline_post_js.html"%}
<script type="text/javascript">
$(function() {

    toggleTextContent();
    toggleTeacherName();

    $("input[name='item_category']").click(function(){
        toggleTextContent()
    });

    $('#id_is_original').click(function() {
        toggleTeacherName()
    });

});
function toggleTextContent(){
    if($('input:radio[name=item_category]:checked').val() == "2"){
        $('#div_text_id').hide();
        $('#id_content').val('');
    }else{
        $('#div_text_id').show();
    }
}

function toggleTeacherName(){
    if ($('#id_is_original').is(':checked')) {
        $('#div_teacher_id').hide();
        $('#id_teacher_name').val('');
    }else{
        $('#div_teacher_id').show();
    }
}
</script>
{% endblock %}
